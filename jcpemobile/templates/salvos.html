{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<!-- Meta Tags Essenciais -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<!-- SEO e Meta Informações -->
<meta name="description" content="Jornal do Commercio - O mais tradicional veículo de comunicação de Pernambuco. Notícias, reportagens e cobertura completa.">
<meta name="keywords" content="notícias, pernambuco, recife, jornal, commercio, jc, política, economia, esportes">
<meta name="author" content="Jornal do Commercio">
<meta name="robots" content="index, follow">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:title" content="TOP 10 Mais Lidas - Jornal do Commercio">
<meta property="og:description" content="As notícias mais lidas do Jornal do Commercio">
<meta property="og:image" content="{% static 'images/logo-jc.png' %}">

<!-- Favicon -->
<link rel="icon" type="image/png" href="{% static 'images/jc-favicon.png' %}">

<!-- Título -->
<title>TOP 10 Mais Lidas - Jornal do Commercio</title>

<!-- Fontes -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- CSS - Ordem Importante -->
<link rel="stylesheet" href="{% static 'css/reset.css' %}">
<link rel="stylesheet" href="{% static 'css/variaveis.css' %}">
<link rel="stylesheet" href="{% static 'css/base.css' %}">
<link rel="stylesheet" href="{% static 'css/componentes.css' %}">
<link rel="stylesheet" href="{% static 'css/layout.css' %}?v=9">
<link rel="stylesheet" href="{% static 'css/home-layout.css' %}">
<link rel="stylesheet" href="{% static 'css/nossos-produtos.css' %}">
<link rel="stylesheet" href="{% static 'css/responsivo.css' %}">
<link rel="stylesheet" href="{% static 'css/modal-cadastro.css' %}">
<link rel="stylesheet" href="{% static 'css/modal-feedback.css' %}">

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* Reset do conteúdo principal */
        .conteudo-principal {
            background-color: #f6f6f6;
            padding: 16px;
            padding-top: calc(44px + var(--altura-cabecalho-mobile) + 8px);
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 420px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        h1 {
            font-size: 28px;
            margin-bottom: 8px;
            color: #111;
        }

        .underline {
            width: 70px;
            height: 4px;
            background: linear-gradient(90deg, #DE1B24, #DE1B24);
            margin-top: -18px;
            margin-bottom: 6px;
            border-radius: 2px;
        }

        /* CARDS LATERAIS */
        .news-item {
            display: flex;
            align-items: stretch;
            justify-content: space-between;
            padding: 0;
            position: relative;
            border-radius: 18px;
            background-color: #fff;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            width: 100%;
            text-decoration: none;
            color: inherit;
            margin-bottom: 14px;
            min-height: 100px; /* reduzido ainda mais para card bem compacto */
        }

        .news-content {
            flex: 1;
            padding: 8px; /* reduzido ainda mais para compactar o conteúdo */
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            position: relative;
            /* espaço reservado à direita para o bloco de imagem absoluto */
            padding-right: calc(40% + 16px);
        }

        .tag {
            display: inline-block;
            font-size: 12.5px; /* aumentado */
            padding: 2px 10px;
            margin: 0; /* remove bottom margin, we'll control spacing in header */
            margin-left: -8px; /* nudge slightly to the left */
            border-radius: 6px;
            background-color: transparent; /* remove red background */
            color: #E31B23; /* keep tag text red */
            font-weight: 700;
            text-align: left;
            width: fit-content;
            align-self: flex-start;
            border: none;
            transition: transform 120ms ease, margin 120ms ease;
        }

        .news-header {
            display: flex;
            flex-direction: column; /* coloca a tag acima do título */
            align-items: flex-start;
            gap: 4px;
            margin-bottom: 6px;
        }

        .news-title {
            font-size: 14px;
            font-weight: 700;
            color: #111;
            margin: 0 0 6px 0;
            line-height: 1.4;
        }

        .news-desc {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
            margin: 0;
        }

        .news-image {
            position: absolute; /* ocupa todo o lado direito do cartão */
            right: 0;
            top: 0;
            bottom: 0;
            width: 40%;
            height: 100%;
            min-width: 140px;
            object-fit: cover;
            object-position: center center;
            border-radius: 0 18px 18px 0;
            flex-shrink: 0;
            display: block;
            transform: none !important;
            z-index: 1;
        }

        .more-options {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 24px;
            height: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .more-options svg {
            width: 20px;
            height: 20px;
            fill: #666;
        }

        /* Responsivo */
        @media (max-width: 480px) {
            .conteudo-principal {
                padding: 12px;
                padding-top: 100px;
            }

            .container {
                gap: 12px;
            }

            .news-item {
                min-height: 96px; /* mobile mais compacto */
            }

            .news-content {
                padding: 8px; /* padding reduzido em mobile */
                padding-right: calc(36% + 12px);
            }

            .news-image {
                position: absolute;
                right: 0;
                top: 0;
                bottom: 0;
                width: 36%; /* menor em mobile */
                min-width: 100px;
                height: 100%;
                object-position: center center;
                transform: none !important;
            }

            /* Ajuste da tag para telas pequenas */
            .tag {
                margin-left: -6px;
            }

            .news-title {
                font-size: 13px;
            }

            .news-desc {
                font-size: 11px;
            }
        }

        @media (min-width: 768px) {
            .conteudo-principal {
                padding: 24px;
                padding-top: 140px;
            }

            .container {
                max-width: 600px;
                gap: 20px;
            }

            .news-item {
                min-height: 120px; /* reduzido para desktop */
            }

            .news-content {
                padding: 12px; /* padding menor em telas maiores */
                padding-right: calc(42% + 16px);
            }

            .news-title {
                font-size: 16px;
            }

            .news-desc {
                font-size: 13px;
            }

            .news-image {
                position: absolute;
                right: 0;
                top: 0;
                bottom: 0;
                width: 42%; /* ligeiramente menor que antes */
                min-width: 220px;
                height: 100%;
                object-position: center center;
                transform: none !important;
            }
        }

        @media (min-width: 1024px) {
            .container {
                max-width: 740px;
            }
        }
    </style>
</head>
<body>
<!-- Barra Superior UOL -->
<div class="barra-uol">
<div class="barra-uol-container">
<a href="https://www.uol.com.br" target="_blank" rel="noopener noreferrer">
<img src="https://conteudo.imguol.com.br/c/_layout/v3/logoUOL2021/logo_completo_white.svg" width="68" height="24" alt="UOL - O melhor conteúdo" title="UOL - O melhor conteúdo">
</a>
</div>
</div>

<div class="top-bar"></div>

{% include 'includes/menu_hamburguer.html' %}

<main class="conteudo-principal">
    <div class="container">
        <h1>#Salvos</h1>
        <div class="underline"></div>

        <div class="news-list" id="newsList">
            {% if user.is_authenticated %}
                {% if salvos_list %}
                    {% for item in salvos_list %}
                    <a href="{% url 'noticia_detalhe' item.noticia.slug %}" class="news-item">
                        <div class="news-content">
                            <div class="news-header">
                                <span class="tag">{{ item.noticia.categoria.nome }}</span>
                                <h2 class="news-title">{{ item.noticia.titulo }}</h2>
                            </div>
                            <p class="news-desc">{{ item.noticia.resumo|truncatewords:20 }}</p>
                        </div>
                        {% if item.noticia.imagem %}
                        <img src="{{ item.noticia.imagem.url }}" alt="{{ item.noticia.titulo }}" class="news-image">
                        {% else %}
                        <img src="{% static 'images/placeholder.jpg' %}" alt="{{ item.noticia.titulo }}" class="news-image">
                        {% endif %}
                        <div class="more-options" onclick="removerNoticia(event, {{ item.noticia.id }})">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <circle cx="12" cy="5" r="2"/>
                                <circle cx="12" cy="12" r="2"/>
                                <circle cx="12" cy="19" r="2"/>
                            </svg>
                        </div>
                    </a>
                    {% endfor %}
                {% else %}
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>Você ainda não salvou nenhuma notícia.</p>
                        <a href="{% url 'index' %}" style="color: #DE1B24; text-decoration: none; font-weight: 600;">Explorar notícias</a>
                    </div>
                {% endif %}
            {% else %}
                <div id="noticiasSalvasLocal"></div>
            {% endif %}
        </div>

        <!-- Seção Últimas Notícias -->
        <div class="ranking-section">
            <div class="section-header">
                <h2 class="section-title">Últimas Notícias</h2>
                <div class="title-underline"></div>
            </div>
            
            <div class="news-list">
            <!-- Notícia 1 - Pernambuco -->
            <a href="#" class="news-item">
                <div class="news-content">
                    <div class="news-header">
                        <span class="tag">Pernambuco</span>
                        <h2 class="news-title">Polícia investiga série de crimes no centro da cidade</h2>
                    </div>
                    <p class="news-desc">Autoridades buscam pistas sobre os incidentes ocorridos nas últimas semanas na região central</p>
                </div>
                <img src="https://s2-oglobo.glbimg.com/YIfXTNlGq2B-yF3cZwAK85b2QvM=/0x0:4816x3211/888x0/smart/filters:strip_icc()/i.s3.glbimg.com/v1/AUTH_da025474c0c44edd99332dddb09cabe8/internal_photos/bs/2024/a/l/hELZB2Tvaa4gECCGhFxQ/107026302-pa-brasilia-df-22-05-2024-entrevista-exclusiva-senador-sergio-moro-em-seu-gabinete-fot.jpg" alt="Notícia Pernambuco" class="news-image">
                <div class="more-options">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <circle cx="12" cy="5" r="2"/>
                        <circle cx="12" cy="12" r="2"/>
                        <circle cx="12" cy="19" r="2"/>
                    </svg>
                </div>
            </a>

            <!-- Notícia 2 - Nacional -->
            <a href="#" class="news-item">
                <div class="news-content">
                    <div class="news-header">
                        <span class="tag">Nacional</span>
                        <h2 class="news-title">Governo anuncia novas medidas econômicas para 2025</h2>
                    </div>
                    <p class="news-desc">Pacote inclui incentivos fiscais e programas de geração de emprego em todo o país</p>
                </div>
                <img src="https://kyoto.com.br/wp-content/uploads/2021/10/BTS.jpg" alt="Notícia Nacional" class="news-image">
                <div class="more-options">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <circle cx="12" cy="5" r="2"/>
                        <circle cx="12" cy="12" r="2"/>
                        <circle cx="12" cy="19" r="2"/>
                    </svg>
                </div>
            </a>

            <!-- Notícia 3 - Esportes -->
            <a href="#" class="news-item">
                <div class="news-content">
                    <div class="news-header">
                        <span class="tag">Esportes</span>
                        <h2 class="news-title">Time local conquista título do campeonato regional</h2>
                    </div>
                    <p class="news-desc">Vitória emocionante garante a taça após disputa acirrada contra o rival histórico</p>
                </div>
                <img src="https://s2-oglobo.glbimg.com/YIfXTNlGq2B-yF3cZwAK85b2QvM=/0x0:4816x3211/888x0/smart/filters:strip_icc()/i.s3.glbimg.com/v1/AUTH_da025474c0c44edd99332dddb09cabe8/internal_photos/bs/2024/a/l/hELZB2Tvaa4gECCGhFxQ/107026302-pa-brasilia-df-22-05-2024-entrevista-exclusiva-senador-sergio-moro-em-seu-gabinete-fot.jpg" alt="Notícia Esportes" class="news-image">
                <div class="more-options">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <circle cx="12" cy="5" r="2"/>
                        <circle cx="12" cy="12" r="2"/>
                        <circle cx="12" cy="19" r="2"/>
                    </svg>
                </div>
            </a>
        </div>
        </div>
    </div>
</main>

<!-- Navegação Inferior (Mobile) -->
<nav class="navegacao-inferior" id="navegacaoInferior" aria-label="Navegação rápida">
<a href="{% url 'index' %}" class="nav-item nav-item-ativo">
<img src="{% static 'images/Home.png' %}" alt="Início" class="icone-home">
<span>Início</span>
</a>

<button id="botaoBusca" class="nav-item botao-busca" aria-label="Abrir busca">
<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
<circle cx="18.3333" cy="18.3334" r="10" stroke="#33363F" stroke-width="3"/>
<path d="M33.3333 33.3334L28.3333 28.3334" stroke="#33363F" stroke-width="3" stroke-linecap="round"/>
</svg>
<span>Pesquisa</span>
</button>

<a href="{% url 'neels' %}" class="nav-item">
<img src="{% static 'images/NFC.png' %}" alt="Neels" class="icone-nfc">
<span>Neels</span>
</a>

<a href="{% url 'mais_lidas' %}" class="nav-item">
<img src="{% static 'images/Fire@3x.png' %}" alt="Mais Lidas" class="icone-fire">
<span>Mais Lidas</span>
</a>

<a href="#perfil" class="nav-item">
<img src="{% static 'images/Radio_Fill.png' %}" alt="Ao vivo" class="icone-radio">
<span>Ao vivo</span>
</a>
</nav>

<!-- Nossos Produtos -->
<section class="nossos-produtos">
<div class="nossos-produtos-container">
<h2 class="nossos-produtos-titulo">Nossos Produtos</h2>
<div class="produtos-grid">
<a href="https://www.ne10.uol.com.br/interior" target="_blank" class="produto-item" title="NE10 Interior">
<div class="produto-icone">
<img src="https://sjcc.ne10.uol.com.br/rodape_global/img/ne10interior.webp" alt="NE10 Interior">
</div>
<span class="produto-nome">NE10 Interior</span>
</a>

<a href="https://www.radiojornal.ne10.uol.com.br/" target="_blank" class="produto-item" title="Rádio Jornal">
<div class="produto-icone">
<img src="https://sjcc.ne10.uol.com.br/rodape_global/img/radio.webp" alt="Rádio Jornal">
</div>
<span class="produto-nome">Rádio Jornal</span>
</a>

<a href="https://tvjornal.ne10.uol.com.br/" target="_blank" class="produto-item" title="TV Jornal">
<div class="produto-icone">
<img src="https://sjcc.ne10.uol.com.br/rodape_global/img/tvjornal.webp" alt="TV Jornal">
</div>
<span class="produto-nome">TV Jornal</span>
</a>

<a href="https://jc.ne10.uol.com.br/" target="_blank" class="produto-item" title="Jornal do Commercio">
<div class="produto-icone">
<img src="https://sjcc.ne10.uol.com.br/rodape_global/img/jc-novo.webp" alt="Jornal do Commercio">
</div>
<span class="produto-nome">Jornal do Commercio</span>
</a>

<a href="https://www.blogdotorcedor.com.br/" target="_blank" class="produto-item" title="Blog do Torcedor">
<div class="produto-icone">
<img src="https://sjcc.ne10.uol.com.br/rodape_global/img/blog_do_torcedor.webp" alt="Blog do Torcedor">
</div>
<span class="produto-nome">Blog do Torcedor</span>
</a>

<a href="https://www.social1.com.br/" target="_blank" class="produto-item" title="Social1">
<div class="produto-icone">
<img src="https://sjcc.ne10.uol.com.br/rodape_global/img/social.webp" alt="Social1">
</div>
<span class="produto-nome">Social1</span>
</a>

<a href="https://www.receitadaboa.com.br/" target="_blank" class="produto-item" title="Receita da Boa">
<div class="produto-icone">
<img src="https://sjcc.ne10.uol.com.br/rodape_global/img/receita_da_boa.webp" alt="Receita da Boa">
</div>
<span class="produto-nome">Receita da Boa</span>
</a>
</div>
</div>
</section>

<!-- Rodapé -->
<footer class="rodape" id="rodape">
<div class="rodape-conteudo">
<div class="rodape-logo">
<img src="https://jc.uol.com.br/img/logo.svg" alt="Jornal do Commercio" class="logo-imagem">
<p>O jornal mais tradicional de Pernambuco</p>

<h3 class="rodape-redes-titulo">Nossas Redes</h3>
<div class="rodape-redes-sociais">
<a href="https://www.facebook.com/jornaldocommercio" target="_blank" class="icone-social icone-facebook" aria-label="Facebook">
<i class="fab fa-facebook-f"></i>
</a>
<a href="https://www.instagram.com/jornaldocommercio" target="_blank" class="icone-social icone-instagram" aria-label="Instagram">
<i class="fab fa-instagram"></i>
</a>
<a href="https://twitter.com/jornalcommercio" target="_blank" class="icone-social icone-twitter" aria-label="Twitter">
<svg xmlns="http://www.w3.org/2000/svg" width="34" height="35" viewBox="0 0 34 35" fill="none">
<circle cx="14.5946" cy="15.4054" r="14.5946" fill="#D9D9D9"/>
<path d="M11.1514 7.90039L11.1807 7.9375L15.4121 13.2725L20.6582 7.92969L20.6875 7.90039H22.4531L22.2861 8.07031L16.2012 14.2676L23.0781 22.9375L23.207 23.0996H17.8936L17.8633 23.0625L13.2607 17.2607L7.55859 23.0703L7.5293 23.0996H5.76172L5.92871 22.9297L12.4717 16.2666L5.96289 8.0625L5.83496 7.90039H11.1514ZM18.5391 21.8662H20.6084L10.5049 9.13086H8.43555L18.5391 21.8662Z" fill="#33363F" stroke="#33363F" stroke-width="0.2"/>
</svg>
</a>
<a href="https://www.linkedin.com/company/jornal-do-commercio" target="_blank" class="icone-social icone-linkedin" aria-label="LinkedIn">
<i class="fab fa-linkedin-in"></i>
</a>
<a href="https://www.youtube.com/@jornaldocommercio" target="_blank" class="icone-social icone-youtube" aria-label="YouTube">
<i class="fab fa-youtube"></i>
</a>
<a href="https://www.tiktok.com/@jornaldocommercio" target="_blank" class="icone-social icone-tiktok" aria-label="TikTok">
<i class="fab fa-tiktok"></i>
</a>
</div>
</div>

<div class="rodape-links">
<div class="rodape-coluna">
<h3>Canais</h3>
<ul>
<li><a href="{% url 'index' %}">Últimas Notícias</a></li>
<li><a href="#colunas">Colunas</a></li>
<li><button class="btn-feedback-footer" onclick="abrirModalFeedback()">Envie seu Feedback</button></li>
</ul>
</div>

<div class="rodape-coluna">
<h3>Institucionais</h3>
<ul>
<li><a href="#quem-somos">Quem Somos</a></li>
<li><a href="https://www.jcpm.com.br/sustentabilidade/" target="_blank">Práticas ASG JCPM</a></li>
<li><a href="https://ne10.uol.com.br/privacidade/" target="_blank">Privacidade</a></li>
<li><a href="#melhores-praticas">Melhores Práticas</a></li>
<li><a href="#lgpd">LGPD</a></li>
<li><a href="#publicacoes">Publicações</a></li>
<li><a href="#expediente">Expediente</a></li>
<li><a href="#fale-conosco">Fale Conosco</a></li>
<li><a href="https://sjcc.gupy.io/" target="_blank">Trabalhe Conosco</a></li>
</ul>
</div>

<div class="rodape-coluna">
<h3>Serviços</h3>
<ul>
<li><a href="#noticias-whatsapp">Notícias pelo WhatsApp</a></li>
<li><a href="#newsletter">Newsletter JC</a></li>
<li><a href="#publicidade-legal">Publicidade Legal</a></li>
<li><a href="https://ads.sjcc.com.br/?utm_source=jc_site&utm_medium=bt_anuncie_conosco&utm_campaign=anuncie_aqui_rodape&_gl=1*2yvvs*_ga*NzAwNTE0NTM1LjE3NTUyNjUzOTc.*_ga_S1QTC8L49Z*czE3NjE2NTkyMjMkbzI2JGcxJHQxNzYxNjYwNzk5JGoyOCRsMCRoMA.." target="_blank">Anuncie Conosco</a></li>
</ul>
</div>

<div class="rodape-coluna">
<h3>Aplicativos</h3>
<ul>
<li><a href="#app-jc">Jornal do Commercio</a></li>
<li><a href="#app-radio">Rádio Jornal</a></li>
</ul>
</div>
</div>
</div>

<div class="rodape-copyright">
<p>&copy; 2025 Jornal do Commercio. Todos os direitos reservados.</p>
</div>

<div class="rodape-grupo-jcpm">
<p class="rodape-grupo-texto">Jornal @ 2025 - Uma empresa do grupo JCPM</p>
<p class="rodape-licenciamento">PARA SOLICITAÇÃO DE LICENCIAMENTO, CONTACTAR EDITORES@NE10.COM.BR</p>
<img src="https://imagens.ne10.uol.com.br/jcpm/logo_jcpm_footer.svg" alt="Grupo JCPM" class="marca-grupo-jcpm">
</div>
</footer>

<!-- Modal de Cadastro -->
{% include 'cadastro_modal.html' %}

<!-- Modal de Login -->
{% include 'login_modal.html' %}

<!-- JavaScript -->
<script src="{% static 'js/app.js' %}"></script>
<script src="{% static 'js/header-animation.js' %}"></script>
<script src="{% static 'js/navegacao.js' %}"></script>
<script src="{% static 'js/busca.js' %}"></script>
<script src="{% static 'js/noticias.js' %}"></script>
<script src="{% static 'js/cadastro.js' %}"></script>
<script src="{% static 'js/login.js' %}"></script>
<script src="{% static 'js/feedback.js' %}"></script>

    <script>
        function toggleBookmark(event, noticiaId) {
            event.preventDefault();
            event.stopPropagation();
            
            const icon = event.currentTarget;
            const svg = icon.querySelector('svg');
            
            if (svg && svg.getAttribute) {
                const currentFill = svg.getAttribute('fill');
                if (!currentFill || currentFill === 'none') {
                    svg.setAttribute('fill', '#DE1B24');
                    icon.style.opacity = '1';
                } else {
                    svg.setAttribute('fill', 'none');
                    icon.style.opacity = '0.4';
                }
            }
        }

        function mostrarNotificacao(mensagem, tipo) {
            const notificacaoExistente = document.querySelector('.notificacao-feedback');
            if (notificacaoExistente) {
                notificacaoExistente.remove();
            }

            const notificacao = document.createElement('div');
            notificacao.className = `notificacao-feedback notificacao-${tipo}`;
            notificacao.innerHTML = `
                <i class="fas fa-${tipo === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                <span>${mensagem}</span>
            `;

            // Adicionar estilos apenas uma vez
            if (!document.getElementById('notificacao-feedback-styles')) {
                const styleElement = document.createElement('style');
                styleElement.id = 'notificacao-feedback-styles';
                styleElement.textContent = `
                    .notificacao-feedback {
                        position: fixed;
                        top: 80px;
                        right: 20px;
                        padding: 15px 20px;
                        border-radius: 8px;
                        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                        display: flex;
                        align-items: center;
                        gap: 10px;
                        z-index: 10000;
                        animation: slideInRight 0.3s ease-out;
                        font-size: 0.95rem;
                        font-weight: 500;
                    }
                    .notificacao-success { background-color: #10b981; color: white; }
                    .notificacao-error { background-color: #ef4444; color: white; }
                    .notificacao-feedback i { font-size: 1.2rem; }
                    @keyframes slideInRight {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOutRight {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(styleElement);
            }

            document.body.appendChild(notificacao);

            setTimeout(() => {
                notificacao.style.animation = 'slideOutRight 0.3s ease-out';
                setTimeout(() => notificacao.remove(), 300);
            }, 3000);
        }

        // Função para carregar notícias salvas do localStorage
        async function carregarNoticiasSalvasLocal() {
            const container = document.getElementById('noticiasSalvasLocal');
            if (!container) return;

            const salvas = localStorage.getItem('noticiasSalvas');
            if (!salvas) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>Você ainda não salvou nenhuma notícia.</p>
                        <a href="{% url 'index' %}" style="color: #DE1B24; text-decoration: none; font-weight: 600;">Explorar notícias</a>
                    </div>
                `;
                return;
            }

            const ids = JSON.parse(salvas);
            if (ids.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>Você ainda não salvou nenhuma notícia.</p>
                        <a href="{% url 'index' %}" style="color: #DE1B24; text-decoration: none; font-weight: 600;">Explorar notícias</a>
                    </div>
                `;
                return;
            }

            // Buscar notícias por IDs
            try {
                const response = await fetch(`/api/noticias/?ids=${ids.join(',')}`);
                const noticias = await response.json();

                if (noticias.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: #666;">
                            <p>Você ainda não salvou nenhuma notícia.</p>
                            <a href="{% url 'index' %}" style="color: #DE1B24; text-decoration: none; font-weight: 600;">Explorar notícias</a>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = noticias.map(noticia => `
                    <a href="/${noticia.slug}/" class="news-item">
                        <div class="news-content">
                            <div class="news-header">
                                <span class="tag">${noticia.categoria || 'Notícia'}</span>
                                <h2 class="news-title">${noticia.titulo}</h2>
                            </div>
                            <p class="news-desc">${noticia.resumo || ''}</p>
                        </div>
                        <img src="${noticia.imagem || '{% static "images/placeholder.jpg" %}'}" alt="${noticia.titulo}" class="news-image">
                        <div class="more-options" onclick="removerNoticiaLocal(event, ${noticia.id})">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <circle cx="12" cy="5" r="2"/>
                                <circle cx="12" cy="12" r="2"/>
                                <circle cx="12" cy="19" r="2"/>
                            </svg>
                        </div>
                    </a>
                `).join('');
            } catch (error) {
                console.error('Erro ao carregar notícias salvas:', error);
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p>Erro ao carregar notícias salvas.</p>
                    </div>
                `;
            }
        }

        // Função para remover notícia salva (usuário logado)
        function removerNoticia(event, noticiaId) {
            event.preventDefault();
            event.stopPropagation();

            if (!confirm('Deseja remover esta notícia dos salvos?')) return;

            fetch(`/remover-noticia-salva/${noticiaId}/`, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}',
                    'Content-Type': 'application/json',
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    mostrarNotificacao('Notícia removida dos salvos!', 'success');
                    location.reload();
                } else {
                    mostrarNotificacao(data.message || 'Erro ao remover notícia.', 'error');
                }
            })
            .catch(error => {
                console.error('Erro:', error);
                mostrarNotificacao('Erro ao remover notícia.', 'error');
            });
        }

        // Função para remover notícia do localStorage (usuário não logado)
        function removerNoticiaLocal(event, noticiaId) {
            event.preventDefault();
            event.stopPropagation();

            if (!confirm('Deseja remover esta notícia dos salvos?')) return;

            const salvas = JSON.parse(localStorage.getItem('noticiasSalvas') || '[]');
            const novasSalvas = salvas.filter(id => id !== noticiaId.toString() && id !== noticiaId);
            localStorage.setItem('noticiasSalvas', JSON.stringify(novasSalvas));

            mostrarNotificacao('Notícia removida dos salvos!', 'success');
            carregarNoticiasSalvasLocal();
        }

        // Carregar notícias ao iniciar a página
        {% if not user.is_authenticated %}
        document.addEventListener('DOMContentLoaded', carregarNoticiasSalvasLocal);
        {% endif %}
    </script>
</body>
</html>
