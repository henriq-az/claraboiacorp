{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<!-- Meta Tags Essenciais -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<!-- SEO e Meta Informações -->
<meta name="description" content="Resultados de busca para {{ q }} - Jornal do Commercio">
<meta name="robots" content="noindex, follow">

<!-- Favicon -->
<link rel="icon" type="image/png" href="{% static 'images/jc-favicon.png' %}">

<!-- Título -->
<title>{% if q %}Busca: {{ q }}{% else %}Buscar notícias{% endif %} - Jornal do Commercio</title>

<!-- Fontes -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- CSS - Ordem Importante -->
<link rel="stylesheet" href="{% static 'css/reset.css' %}">
<link rel="stylesheet" href="{% static 'css/variaveis.css' %}">
<link rel="stylesheet" href="{% static 'css/base.css' %}">
<link rel="stylesheet" href="{% static 'css/componentes.css' %}">
<link rel="stylesheet" href="{% static 'css/layout.css' %}?v=9">
<link rel="stylesheet" href="{% static 'css/home-layout.css' %}">
<link rel="stylesheet" href="{% static 'css/responsivo.css' %}">
<link rel="stylesheet" href="{% static 'css/popup-busca.css' %}">
<link rel="stylesheet" href="{% static 'css/busca-resultados.css' %}">

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<!-- Barra Superior UOL -->
<div class="barra-uol">
  <div class="barra-uol-container">
    <a href="https://www.uol.com.br" target="_blank" rel="noopener noreferrer">
    <img src="https://conteudo.imguol.com.br/c/_layout/v3/logoUOL2021/logo_completo_white.svg" width="68" height="24" alt="UOL - O melhor conteúdo" title="UOL - O melhor conteúdo">
    </a>
  </div>
</div>

<div class="top-bar"></div>

{% include 'includes/menu_hamburguer.html' %}

<!-- Conteúdo Principal -->
<main class="conteudo-principal busca-page">
  <div class="container">

    <!-- Seção de Busca -->
    <section class="busca-header-section">
      <h1 class="busca-titulo">
        {% if q %}
          Resultados para "<span class="busca-termo">{{ q }}</span>"
        {% else %}
          Buscar Notícias
        {% endif %}
      </h1>

      {% if total > 0 %}
        <p class="busca-total">{{ total }} notícia{{ total|pluralize }} encontrada{{ total|pluralize }}</p>
      {% endif %}

      <!-- Formulário de busca -->
      <form action="{% url 'buscar' %}" method="get" class="busca-form-page">
        <div class="busca-input-wrapper">
          <svg class="busca-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 40 40" fill="none">
            <circle cx="18.3333" cy="18.3334" r="10" stroke="#999" stroke-width="3"/>
            <path d="M33.3333 33.3334L28.3333 28.3334" stroke="#999" stroke-width="3" stroke-linecap="round"/>
          </svg>
          <input
            type="search"
            name="q"
            value="{{ q }}"
            placeholder="Pesquisar notícias..."
            class="busca-campo-page"
            autofocus
          >
          <button type="submit" class="busca-btn-page">Buscar</button>
        </div>
      </form>
    </section>

    <!-- Resultados -->
    {% if page_obj.object_list %}
      <section class="resultados-section">
        <div class="resultados-grid">
          {% for noticia in page_obj.object_list %}
            <a href="{% url 'noticia_detalhe' noticia.slug %}" class="resultado-card">
              {% if noticia.imagem %}
                <div class="resultado-imagem">
                  <img src="{{ noticia.imagem.url }}" alt="{{ noticia.titulo }}" loading="lazy">
                </div>
              {% endif %}
              <div class="resultado-conteudo">
                <span class="resultado-tag">{{ noticia.categoria.nome }}</span>
                <h2 class="resultado-titulo">{{ noticia.titulo }}</h2>
                {% if noticia.resumo %}
                  <p class="resultado-resumo">{{ noticia.resumo|truncatewords:20 }}</p>
                {% endif %}
                <time class="resultado-data">{{ noticia.data_publicacao|date:"d/m/Y - H:i" }}</time>
              </div>
            </a>
          {% endfor %}
        </div>

        <!-- Paginação -->
        {% if page_obj.paginator.num_pages > 1 %}
          <nav class="paginacao">
            {% if page_obj.has_previous %}
              <a href="?q={{ q|urlencode }}&page=1" class="paginacao-btn" aria-label="Primeira página">
                <i class="fas fa-angle-double-left"></i>
              </a>
              <a href="?q={{ q|urlencode }}&page={{ page_obj.previous_page_number }}" class="paginacao-btn" aria-label="Página anterior">
                <i class="fas fa-angle-left"></i>
              </a>
            {% else %}
              <span class="paginacao-btn paginacao-btn-disabled">
                <i class="fas fa-angle-double-left"></i>
              </span>
              <span class="paginacao-btn paginacao-btn-disabled">
                <i class="fas fa-angle-left"></i>
              </span>
            {% endif %}

            <span class="paginacao-info">
              Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}
            </span>

            {% if page_obj.has_next %}
              <a href="?q={{ q|urlencode }}&page={{ page_obj.next_page_number }}" class="paginacao-btn" aria-label="Próxima página">
                <i class="fas fa-angle-right"></i>
              </a>
              <a href="?q={{ q|urlencode }}&page={{ page_obj.paginator.num_pages }}" class="paginacao-btn" aria-label="Última página">
                <i class="fas fa-angle-double-right"></i>
              </a>
            {% else %}
              <span class="paginacao-btn paginacao-btn-disabled">
                <i class="fas fa-angle-right"></i>
              </span>
              <span class="paginacao-btn paginacao-btn-disabled">
                <i class="fas fa-angle-double-right"></i>
              </span>
            {% endif %}
          </nav>
        {% endif %}
      </section>
    {% else %}
      <!-- Estado vazio -->
      <section class="busca-vazia">
        <div class="busca-vazia-conteudo">
          <svg class="busca-vazia-icon" xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 40 40" fill="none">
            <circle cx="18.3333" cy="18.3334" r="10" stroke="#ccc" stroke-width="2"/>
            <path d="M33.3333 33.3334L28.3333 28.3334" stroke="#ccc" stroke-width="2" stroke-linecap="round"/>
          </svg>
          {% if q %}
            <h2 class="busca-vazia-titulo">Nenhum resultado encontrado</h2>
            <p class="busca-vazia-texto">Não encontramos notícias para "<strong>{{ q }}</strong>".</p>
            <p class="busca-vazia-dica">Tente usar palavras-chave diferentes ou mais genéricas.</p>
          {% else %}
            <h2 class="busca-vazia-titulo">Digite algo para buscar</h2>
            <p class="busca-vazia-texto">Use o campo acima para encontrar notícias.</p>
          {% endif %}
          <a href="{% url 'index' %}" class="busca-vazia-btn">
            <i class="fas fa-home"></i>
            Voltar para a Página Inicial
          </a>
        </div>
      </section>
    {% endif %}

  </div>
</main>

<!-- Navegação Inferior (Mobile) -->
<nav class="navegacao-inferior" id="navegacaoInferior" aria-label="Navegação rápida">
<a href="{% url 'index' %}" class="nav-item">
<img src="{% static 'images/Home.png' %}" alt="Início" class="icone-home">
<span>Início</span>
</a>

<button id="botaoBusca" class="nav-item botao-busca nav-item-ativo">
<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
<circle cx="18.3333" cy="18.3334" r="10" stroke="currentColor" stroke-width="3"/>
<path d="M33.3333 33.3334L28.3333 28.3334" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
</svg>
<span>Pesquisa</span>
</button>

<a href="{% url 'neels' %}" class="nav-item">
<img src="{% static 'images/NFC.png' %}" alt="Neels" class="icone-nfc">
<span>Neels</span>
</a>

<a href="{% url 'mais_lidas' %}" class="nav-item">
<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36" fill="none">
<path d="M28.5 21.5004L30 21.5008V21.5004H28.5ZM27.7012 25.019L29.087 25.5931L29.087 25.593L27.7012 25.019ZM25.4248 28.4252L26.4854 29.4859L26.4855 29.4859L25.4248 28.4252ZM22.0186 30.7016L22.5926 32.0874L22.5926 32.0874L22.0186 30.7016ZM13.9814 30.7016L13.4074 32.0874L13.4074 32.0874L13.9814 30.7016ZM10.5752 28.4252L9.51454 29.4859L9.51455 29.4859L10.5752 28.4252ZM8.29883 25.019L6.91301 25.593L6.91303 25.5931L8.29883 25.019ZM7.5 21.0004H6V21.0005L7.5 21.0004ZM23.1612 9.07129L24.1124 10.2312L23.1612 9.07129ZM23.3359 9.0689L22.3858 10.2296L23.3359 9.0689ZM19.7191 12.9802L18.2947 13.4503L19.7191 12.9802ZM20.0018 13.0069L18.6904 12.2786L20.0018 13.0069ZM28.4735 21.7217L29.9357 22.0565L28.4735 21.7217ZM28.4698 21.7462L26.9736 21.6396L28.4698 21.7462ZM14.9568 4.59721L13.8665 5.62739L14.9568 4.59721ZM14.7619 4.58762L15.7519 5.71451L14.7619 4.58762ZM14.9568 4.59721L13.8665 5.62739C14.303 6.08939 16.7749 8.8457 18.2947 13.4503L19.7191 12.9802L21.1435 12.51C19.4391 7.34589 16.6631 4.219 16.0471 3.56703L14.9568 4.59721ZM20.0018 13.0069L21.3131 13.7353C22.4796 11.6349 23.8311 10.4618 24.1124 10.2312L23.1612 9.07129L22.21 7.91144C21.7397 8.29715 20.0958 9.74822 18.6904 12.2786L20.0018 13.0069ZM23.3359 9.0689L22.3858 10.2296C22.9194 10.6664 27 14.2321 27 20.9125H28.5H30C30 12.9167 25.1128 8.58497 24.2861 7.90819L23.3359 9.0689ZM28.5 20.9125H27V21.5004H28.5H30V20.9125H28.5ZM28.5 21.5004L27 21.5C27 21.4432 27.0076 21.4035 27.0114 21.387L28.4735 21.7217L29.9357 22.0565C29.9721 21.8975 29.9999 21.71 30 21.5008L28.5 21.5004ZM28.4698 21.7462L26.9736 21.6396C26.9048 22.6063 26.6844 23.5539 26.3154 24.445L27.7012 25.019L29.087 25.593C29.5824 24.397 29.8749 23.133 29.966 21.8528L28.4698 21.7462ZM27.7012 25.019L26.3154 24.4449C25.8632 25.5365 25.1999 26.5288 24.3641 27.3646L25.4248 28.4252L26.4855 29.4859C27.5995 28.3718 28.4838 27.049 29.087 25.5931L27.7012 25.019ZM25.4248 28.4252L24.3642 27.3646C23.5283 28.2004 22.5361 28.8636 21.4445 29.3158L22.0186 30.7016L22.5926 32.0874C24.0486 31.4843 25.3714 30.5999 26.4854 29.4859L25.4248 28.4252ZM22.0186 30.7016L21.4445 29.3158C20.353 29.7679 19.1822 30.0004 18 30.0004V31.5004V33.0004C19.5755 33.0004 21.1364 32.6906 22.5926 32.0874L22.0186 30.7016ZM18 31.5004V30.0004C16.8178 30.0004 15.647 29.7679 14.5555 29.3158L13.9814 30.7016L13.4074 32.0874C14.8636 32.6906 16.4245 33.0004 18 33.0004V31.5004ZM13.9814 30.7016L14.5555 29.3158C13.4639 28.8636 12.4717 28.2004 11.6358 27.3646L10.5752 28.4252L9.51455 29.4859C10.6286 30.5999 11.9514 31.4843 13.4074 32.0874L13.9814 30.7016ZM10.5752 28.4252L11.6359 27.3646C10.8001 26.5288 10.1368 25.5365 9.68463 24.4449L8.29883 25.019L6.91303 25.5931C7.51615 27.049 8.40047 28.3718 9.51454 29.4859L10.5752 28.4252ZM8.29883 25.019L9.68465 24.445C9.23254 23.3535 9.00003 22.1826 9 21.0004L7.5 21.0004L6 21.0005C6.00004 22.5758 6.30983 24.1368 6.91301 25.593L8.29883 25.019ZM7.5 21.0004H9C9 11.9684 14.9605 6.40981 15.7519 5.71451L14.7619 4.58762L13.7719 3.46074C12.7914 4.32217 6 10.6404 6 21.0004H7.5ZM23.1612 9.07129L24.1124 10.2312C23.65 10.6103 22.9242 10.6703 22.3858 10.2296L23.3359 9.0689L24.2861 7.90819C23.6436 7.38225 22.7764 7.44693 22.21 7.91144L23.1612 9.07129ZM19.7191 12.9802L18.2947 13.4503C18.7456 14.8165 20.6125 14.9966 21.3131 13.7353L20.0018 13.0069L18.6904 12.2786C19.2615 11.2505 20.7763 11.3973 21.1435 12.51L19.7191 12.9802ZM28.4735 21.7217L27.0114 21.387C26.9939 21.4634 26.9801 21.548 26.9736 21.6396L28.4698 21.7462L29.966 21.8528C29.9607 21.9279 29.9495 21.9962 29.9357 22.0565L28.4735 21.7217ZM14.9568 4.59721L16.0471 3.56703C15.4468 2.93172 14.4442 2.87008 13.7719 3.46074L14.7619 4.58762L15.7519 5.71451C15.1956 6.20324 14.3607 6.15044 13.8665 5.62739L14.9568 4.59721Z" fill="currentColor"/>
<path d="M17.4521 16.9058L16.5329 15.7204L16.5329 15.7205L17.4521 16.9058ZM18.5479 16.9058L19.4671 15.7205L19.4671 15.7205L18.5479 16.9058ZM23.9297 24.5825L22.4458 24.802L22.447 24.81L23.9297 24.5825ZM24 25.4995L25.5 25.4995L25.5 25.4994L24 25.4995ZM12 25.4995L10.5 25.4994V25.4995H12ZM12.0693 24.5825L13.552 24.81L13.5532 24.802L12.0693 24.5825ZM17.4521 16.9058L18.3714 18.0911C18.1554 18.2586 17.8446 18.2586 17.6286 18.0911L18.5479 16.9058L19.4671 15.7205C18.6011 15.0488 17.3989 15.0488 16.5329 15.7204L17.4521 16.9058ZM18.5479 16.9058L17.6286 18.0911C18.2631 18.5832 19.3836 19.5275 20.3965 20.7497C21.4239 21.9893 22.2371 23.3909 22.4458 24.802L23.9297 24.5825L25.4135 24.363C25.0902 22.177 23.8954 20.2699 22.7064 18.8353C21.5029 17.3832 20.1985 16.2877 19.4671 15.7205L18.5479 16.9058ZM23.9297 24.5825L22.447 24.81C22.4817 25.036 22.5 25.2662 22.5 25.4996L24 25.4995L25.5 25.4994C25.5 25.1092 25.4694 24.727 25.4123 24.355L23.9297 24.5825ZM24 25.4995H22.5C22.5 27.9848 20.4853 29.9995 18 29.9995V31.4995V32.9995C22.1421 32.9995 25.5 29.6416 25.5 25.4995H24ZM18 31.4995V29.9995C15.5147 29.9995 13.5 27.9848 13.5 25.4995H12H10.5C10.5 29.6416 13.8579 32.9995 18 32.9995V31.4995ZM12 25.4995L13.5 25.4996C13.5 25.2631 13.5178 25.0328 13.552 24.81L12.0693 24.5825L10.5867 24.355C10.5291 24.7301 10.5 25.1124 10.5 25.4994L12 25.4995ZM12.0693 24.5825L13.5532 24.802C13.7619 23.391 14.5752 21.9895 15.6028 20.7498C16.6159 19.5276 17.7367 18.5833 18.3714 18.0911L17.4521 16.9058L16.5329 15.7205C15.8015 16.2876 14.4969 17.3832 13.2932 18.8352C12.1039 20.2698 10.9088 22.1769 10.5855 24.363L12.0693 24.5825Z" fill="currentColor"/>
</svg>
<span>Mais Lidas</span>
</a>

<a href="#perfil" class="nav-item">
<img src="{% static 'images/Radio_Fill.png' %}" alt="Ao vivo" class="icone-radio">
<span>Ao vivo</span>
</a>
</nav>

<script src="{% static 'js/app.js' %}"></script>
<script src="{% static 'js/navegacao.js' %}"></script>
<script src="{% static 'js/busca.js' %}"></script>
</body>
</html>
